<html>
	<head>
		<title>Code Player</title>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
		</script>
		
		<style type="text/css">
			body{
				margin: 0px;
				background-color: black;
			}
		
			div#top_section{
				width: 1518px;
				height: 40px;
				background-color:rgb(66, 58, 58);
			}
			
			p#codeplayer{
				margin-left: 10px;
				color: rgb(227, 0, 0);
				font-size: 20px;
				font-weight: bold;
				font-family: 'Amatic SC', cursive;				
			}
			.btn{
				position: relative;
				left: 600px;
				top: -40px;
				margin: 0px;
				border-radius: 9px;
				border: ridge 3px red;
				background-color: rgb(27, 32, 51);
				font-family: 'Amatic SC', cursive;
				color: rgb(15, 153, 15);
				
			}
			.btn:hover{
				cursor: pointer;
				color: lime;
				border-color: rgb(255, 191, 217);
			}
			
			.in{
				text-align: none;
				width: 350px;
				padding: 0px 0px 800px 0px;
				background-color:rgb(2, 27, 41);
				color: rgb(13, 189, 58);
			}
			
			div#output{
				border: ridge 10px red;
				position: relative;
				float: right;
				left: -5px;
				width: 430px;
			}
			

			
			
		</style>
	</head>

	<body>
		<div id="top_section">
			<p id="codeplayer">CodePlayer</p>
			<button id="html_btn" class="btn">HTML</button>
			<button id="css_btn" class="btn">CSS</button>
			<button id="js_btn" class="btn">JavaScript</button>
			<button id="output_btn" class="btn">Output</button>
		</div>
		
		<textarea id="html_in" class="in" name="html_in" rows="40" cols="1"></textarea>
		<textarea id="css_in" class="in" name="css_in" rows="40" cols="1"></textarea>
		<textarea id="js_in" class="in" name="js_in" rows="40" cols="1"></textarea>
		
		<div id="output" class="in"></div>
		
		<script type="text/javascript">
		
			var css_input; var lines; var js_input; var js_lines; var code; var res;
			
			function CSS_Interpreter(css_arr){
				var name = ""; var attr = ""; var val = ""; var pos_counter = 0; var curr_str = "";
				for(var i = 0; i < css_arr.length; i++){
					//Skip empty rows until you see beginning of new css block.
					//Get name of HTML element to be styled later using jquery syntax.
					if(css_arr[i].length > 2){
						name = css_arr[i].slice(1, css_arr[i].length - 1);
					}
					//Process each styling line.
					var counter1 = 0; var counter2 = 0;
					while(css_arr[i][0] != '}' && counter1 < 41){
						counter1++;
						for(var j = 0; (j < css_arr[i].length && css_arr[i][j] != ':'); ++j){
							counter2++;
							pos_counter = j;
							attr += css_arr[i][j];
						}
						counter2 = 0;
						pos_counter += 2;
						for(var j = pos_counter; j < css_arr[i].length - 1; j++){
							val += css_arr[i][j];
						}
						console.log(name);
						$('#' + name).css(attr, val);
						val = "";
						attr = "";
						pos_counter = 0;
						i++;

					}
					counter1 = 0;
				}
			}
			
			function JS_Interpreter(js_arr){
				var command = "";
				for(var i = 0; i < 40; ++i){
					for(var j = 0; j < js_arr[i].length; ++j){
						if(!(js_arr[i][j] == ';')){
							command += js_arr[i][j];
						}
						else{
							command += js_arr[i][j];
							console.log("command: " + command);
							res = eval(command);
							command = "";
							break;
						}
					}
				}
			}
			
			$("#html_in").keyup(function(){
				$("#output").html($("#html_in").val());
			});
			
			$("#css_in").keyup(function(){
				css_input = $("#css_in").val();
				lines = css_input.split("\n");
				CSS_Interpreter(lines);
			});

			$("#js_in").keyup(function(){
				js_input = $(this).val();
				js_lines = js_input.split("\n");
				JS_Interpreter(js_lines);
			});

		</script>

	</body>
</html>
